<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KNOCK — Demo: Letters + Emotions + Scriptures</title>
</head>
<body>
  <h3>Select a Letter → Select an Emotion → Scriptures</h3>

  <label for="letterSelect">Select a Letter</label>
  <select id="letterSelect" aria-label="Select letter">
    <option value="">-- choose letter --</option>
  </select>

  <br/><br/>

  <label for="emotionSelect">Select an Emotion</label>
  <select id="emotionSelect" aria-label="Select emotion" disabled>
    <option value="">-- pick a letter first --</option>
  </select>

  <div id="scriptures" aria-live="polite" style="margin-top:16px;">
    <em>Scriptures will appear here.</em>
  </div>

  <script>
    // Demo DATA: some letters have emotions + scripture arrays. Other letters exist but empty.
    const DATA = {
      A: {
        Anxiety: [
          {verse:"Philippians 4:6-7", text:"Do not be anxious about anything; present your requests to God."},
          {verse:"1 Peter 5:7", text:"Cast all your anxiety on him because he cares for you."}
        ],
        Anger: [
          {verse:"Ephesians 4:26", text:"In your anger do not sin."}
        ],
        Abandonment: [
          {verse:"Deuteronomy 31:6", text:"He will never leave you nor forsake you."}
        ]
      },
      B: {
        Bitterness: [
          {verse:"Hebrews 12:15", text:"See to it that no bitter root grows up to cause trouble."}
        ],
        Brokenness: [
          {verse:"Psalm 34:18", text:"The LORD is close to the brokenhearted."}
        ]
      },
      C: {
        Confusion: [
          {verse:"Proverbs 3:5", text:"Trust in the LORD with all your heart and do not rely on your own understanding."}
        ],
        Comfort: [
          {verse:"2 Corinthians 1:3-4", text:"God comforts us in all our troubles."}
        ]
      },
      D: {
        Doubt: [
          {verse:"Mark 9:24", text:"I do believe; help me overcome my unbelief!"}
        ],
        Depression: [
          {verse:"Psalm 42:11", text:"Put your hope in God, for I will yet praise him."}
        ]
      },
      E: {
        Emptiness: [
          {verse:"Matthew 11:28", text:"Come to me, all who are weary and burdened, and I will give you rest."}
        ]
      },
      F: {
        Fear: [
          {verse:"Isaiah 41:10", text:"Do not fear, for I am with you; do not be dismayed, for I am your God."}
        ],
        Forgiveness: [
          {verse:"1 John 1:9", text:"If we confess our sins he is faithful to forgive us."}
        ]
      },
      G: {
        Grief: [
          {verse:"Matthew 5:4", text:"Blessed are those who mourn, for they will be comforted."}
        ]
      },
      H: {
        Hopelessness: [
          {verse:"Romans 15:13", text:"May the God of hope fill you with all joy and peace."}
        ],
        Hurt: [
          {verse:"Psalm 147:3", text:"He heals the brokenhearted and binds up their wounds."}
        ]
      },
      // I through Z included but empty for now (letters exist in dropdown)
      I: {}, J: {}, K: {}, L: {}, M: {}, N: {},
      O: {}, P: {}, Q: {}, R: {}, S: {}, T: {},
      U: {}, V: {}, W: {}, X: {}, Y: {}, Z: {}
    };

    // Elements
    const letterSelect = document.getElementById('letterSelect');
    const emotionSelect = document.getElementById('emotionSelect');
    const scriptures = document.getElementById('scriptures');

    // Populate A-Z into letter dropdown
    (function populateLetters(){
      const letters = Array.from({length:26}, (_,i)=>String.fromCharCode(65+i));
      letters.forEach(l => {
        const opt = document.createElement('option');
        opt.value = l;
        opt.textContent = l;
        letterSelect.appendChild(opt);
      });
    })();

    // When a letter is chosen, populate emotions (if any)
    letterSelect.addEventListener('change', (e) => {
      const letter = e.target.value;
      emotionSelect.innerHTML = '';
      const placeholder = document.createElement('option');
      placeholder.value = '';
      placeholder.textContent = letter ? '-- select emotion --' : '-- pick a letter first --';
      emotionSelect.appendChild(placeholder);

      if (!letter || !DATA[letter] || Object.keys(DATA[letter]).length === 0) {
        emotionSelect.disabled = true;
        showMessage(letter ? 'No demo emotions available for this letter.' : 'Choose a letter.');
        return;
      }

      const emotions = Object.keys(DATA[letter]).sort();
      emotions.forEach(em => {
        const opt = document.createElement('option');
        opt.value = em;
        opt.textContent = em;
        emotionSelect.appendChild(opt);
      });

      emotionSelect.disabled = false;
      showMessage('Choose an emotion to see scriptures.');
    });

    // When an emotion is chosen, render scriptures
    emotionSelect.addEventListener('change', (e) => {
      const emotion = e.target.value;
      const letter = letterSelect.value;
      if (!letter || !emotion || !DATA[letter] || !DATA[letter][emotion]) {
        showMessage('No scriptures yet.');
        return;
      }
      const items = DATA[letter][emotion];
      scriptures.innerHTML = '';
      items.forEach(it => {
        const v = document.createElement('div');
        v.innerHTML = '<strong>' + escapeHtml(it.verse) + '</strong><div>' + escapeHtml(it.text) + '</div><br/>';
        scriptures.appendChild(v);
      });
    });

    function showMessage(msg){
      scriptures.innerHTML = '<em>' + msg + '</em>';
    }

    // tiny safe-escape
    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[m]));
    }

    // initial hint
    showMessage('Choose a letter to start.');
  </script>
</body>
</html>
